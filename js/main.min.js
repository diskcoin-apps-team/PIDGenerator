function simpleHash(e){return _hash.init(),_hash.update(e),_hash.getBytes()}function byteArrayToBigInteger(e,n){for(var t,i,o=new BigInteger("0",10),c=e.length-1;c>=0;c--)t=o.multiply(new BigInteger("256",10)),i=t.add(new BigInteger(e[c].toString(10),10)),o=i;return o}function createPID(){let e=[];for(;0===e.length;){let n=PassPhraseGenerator.generatePassPhrase(),t=getAccountId(n);t<72057594037927940&&e.push({value:t,key:n})}return e[0]}var _hash={init:SHA256_init,update:SHA256_write,getBytes:SHA256_finalize};let getAccountId=function(e){return getAccountIdFromPublicKey(getPublicKey(converters.stringToHexString(e)))},getPublicKey=function(e){var n=converters.hexStringToByteArray(e),t=simpleHash(n);return converters.byteArrayToHexString(curve25519.keygen(t).p)},getAccountIdFromPublicKey=function(e,n){var t=converters.hexStringToByteArray(e);_hash.init(),_hash.update(t);var i=_hash.getBytes();i=converters.byteArrayToHexString(i);var o=converters.hexStringToByteArray(i).slice(0,8),c=byteArrayToBigInteger(o).toString();return c};(function(){function e(e){var n=e.innerText,i=document.getElementById("copy_content");i.value=n,i.select(),document.execCommand("Copy"),t("Copied!"),i.blur()}function n(){var e=createPID();$(".plottingID p").text(e.value),o.makeCode(e.value),$(".passphrase p").text(e.key),c.makeCode(e.key)}var t=function(e,n){$(".toast").text(e),$(".toast").fadeIn(300),setTimeout(function(){$(".toast").fadeOut()},n||2500)},i={mask:$(".mask"),alertContent:$(".mask").find(".alert"),show:function(e){var n="success"===e?"fail":"success";i.alertContent.find("."+e).show(),i.alertContent.find("."+n).hide(),i.mask.fadeIn(300),i.mask.find(".close").on("click",i.hide),i.mask.on("click",i.hide),i.fail&&i.alertContent.find("button.fail").off("click").on("click",function(){i.fail()}),i.success&&i.alertContent.find("button.success").off("click").on("click",function(){i.success()})},hide:function(){i.mask.fadeOut(300),i.mask.off("click"),i.mask.find(".close").off("click")}};i.alertContent.on("click",function(e){e=e||window.event,e.stopPropagation()}),i.fail=function(){r.go("create_pid"),i.hide()},i.success=function(){i.hide()};var o=new QRCode("plottingID",{width:128,height:128}),c=new QRCode("passphrase",{width:128,height:128});location.hash="btnGroup";let a=location.hash||"";var r={go:function(e){if(window.onhashchange){if(e===a)return;window.location.hash="#"+e}else $("."+e).show().siblings(".page").hide(),r.onChange&&r.onChange(e)}};window.onhashchange=function(){var e=window.location.hash;e=e.substr(1),""===e&&(window.location.hash="#btnGroup"),a=e,r.go(e),$("."+e).show().siblings(".page").hide(),r.onChange&&r.onChange(e)},r.onChange=function(e){"create_pid"===e&&n()},$(function(){function o(e){if("keydown"!==e.type||!e.which||13==e.which){var n=$(".check_id").find("input").val();n?n<72057594037927940?i.show("success"):i.show("fail"):t("Please enter your PID")}}$(".resetPID").on("click",n),$(".createPID").on("click",function(){r.go("create_pid")}),$(".checkPid").on("click",function(){r.go("check_id")}),$(".copy").on("click",function(){e($(this).parent().find("p")[0])}),$("#checkId").on("click",o),$(".check_id").find("input").on("keydown",o)})})();